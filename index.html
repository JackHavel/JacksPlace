<!Doctype html>
<html lang="en">
    <head id="lockhead">
        <link rel="stylesheet" href="style.css">
        <meta name="google-site-verification" content="xpigYbfxY1QctqFVJyYdxHhhC4Scr2N4oSTB2xjRX0w">
        <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
        <title>Jack's Place</title>
        <!--webpage icon, make sure link is not broken-->
        <link rel="icon" type="image/x-icon" href="Files/favicon.png">
    </head>

    <body class="lockbody" style="z-index: 2;">
        <div id="computer">      
            <div class="lockcontent" style="z-index: 2;">
                <!-- lockpage title -->
                <h1>Jack's Place</h1>
                <!--text that scrolls to explain the lockpage-->                          
                <span id="letter" style="--n:200;">Jack's place is currently searching for a homepage. While you wait here are other places you can find Jack.</span>           
            </div> 
            <div class="socials">
                <a href="https://www.facebook.com/ja.hav.7" id="facebook">
                    <img src="Files/Facebook_Icon.png" class="icon"/>
                </a>
                <a href="https://twitter.com/JackaHav" id="twitter">
                    <img src="Files/Twitter_Icon.png" class="icon"/>
                </a>
                <a href="https://www.linkedin.com/in/jack-havel-6320b81a2" id="linkedin">
                    <img src="Files/Linkedin_Icon.png" class="icon"/>
                </a>
                <a href="https://www.instagram.com/jackahav" id="instagram">
                    <img src="Files/Instagram_Icon.png" class="icon"/>
                </a>
                <a href="https://issuu.com/jhavel/docs/portfiolioissue" id="issue">
                    <img src="Files/Issue_Icon.png" class="icon"/>
                </a>
                <a id="lock" class="icon">
                    <img src="Files/Lock_Icon.png" class="icon"/>
                </a>
            </div>         
            <div class="signin">
                <form class="signin">
                    <div class="protected__alert" data-id="alert"></div>
                    <label for="username" class="lbl">Username:</label>
                    <input type="text" id="username" name="username">
                    <label for="pass" class="lbl">Password:</label>
                    <input type="password" id="pass" name="password">
                    <div>                  
                        <input type="button" class="lbl" id="submit" value="Continue">
                        <input type="button" class="lbl" id="back" value="Back">
                    </div> 
                </form>
            </div>
        </div>       
         <script>
            window.onload = function()
             {              
              var theDelay = 5;
              var timer = setTimeout("showText()",theDelay*1000)
             }
             function showText(){
              document.getElementById("delayedText").style.visibility = "visible";
             }
         </script>
         <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/js-sha1/0.6.0/sha1.min.js"></script>
         <script type="text/javascript">
                     "use strict"
                     var input = document.querySelectorAll('[id="submit"]')
                     var password = document.querySelectorAll('[id="pass"]')
         
                     function login(secret) {
                         var hash = sha1(secret)
                         var url = hash + '/index.html'
                         var alert = document.querySelectorAll('[data-id="alert"]')
         
                         var request = new XMLHttpRequest()
                         request.open('GET', url, true)
         
                         request.onload = function () {
                             if (request.status >= 200 && request.status < 400) {
                                 window.location = url
                             } else {
                                 parent.location.hash = hash
                                 alert[0].style.display = 'block'
                                 password[0].setAttribute('placeholder', 'Incorrect password')
                                 password[0].value = ''
                             }
                         }
                         request.onerror = function () {
                             parent.location.hash = hash
                             alert[0].style.display = 'block'
                             password[0].setAttribute('placeholder', 'Incorrect password')
                             password[0].value = ''
                         }
                         request.send()
                     }
         
                     input[0].addEventListener("click", function () {
                         login(password[0].value)
                     })
         
                     document.onkeydown = function (e) {
                         e = e || window.event
                         if (e.keyCode == 13) {
                             login(password[0].value)
                         }
                     }
         </script>     
    </body>
</html>
